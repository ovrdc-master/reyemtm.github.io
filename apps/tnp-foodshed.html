---
title: TNP Foodshed
layout: app
map: leaflet
template: true
center: 38.90543,-80.68725
zoom: 10
basemap: osm
style: ".leaflet-popup-content{font-size:smaller;}"
---

var storeData = new omnivore.geojson('/data/tnp/tnp_stores.geojson');
storeData.on('ready', function() {
  buildMap();
});

var types = [];

function buildMap() {                             
  map.fitBounds(storeData.getBounds());
  var cnv = new L.geoJson(storeData.toGeoJSON(), {
    /*filter: function(feature) {
        if (feature.properties.Type == "Specialty") {
          return true
        }
      },*/
    onEachFeature: function(feature,layer) {
      var popup = "";
      for (var k in layer.feature.properties) {
        var v = String(layer.feature.properties[k]);
        popup += '<b>' + k + '</b><br>' + v + '<br>' + '<hr style="margin:5px 0px;">';
      }
      layer.bindPopup(popup)
    }
  }).addTo(map);

  
  console.log(storeData);
  map.spin(false);
}
